#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#

quarkus.devservices.enabled=false
kogito.devservices.enabled=false
quarkus.http.test-port=0

quarkus.rest-client."external_service_yaml".url=http://localhost:${quarkus.http.port}

# Build time property to add the Circuit Breaker capability to the corresponding generated class/method, by annotating
# it with the eclipse microprofile @org.eclipse.microprofile.faulttolerance.CircuitBreaker.
# This property doesn't follow the quarkus.fault-tolerance.xxx prefix, you must use this format.
org.kie.kogito.openapi.externalservice.api.ExternalServiceResourceApi/circuitBreakerEcho/CircuitBreaker/enabled=true

# Configuration values for the sake of current example. Produces a quick circuit Open, and a long delayed transitioning
# to the Half Closed state. Don't consider this as suggested configurations for a production system.

# Use a rolling window of 4 consecutive requests
quarkus.fault-tolerance."org.kie.kogito.openapi.externalservice.api.ExternalServiceResourceApi/circuitBreakerEcho".circuit-breaker.request-volume-threshold=4
# With a ratio of .5, if 2 requests fail, then, the circuit is Opened.
quarkus.fault-tolerance."org.kie.kogito.openapi.externalservice.api.ExternalServiceResourceApi/circuitBreakerEcho".circuit-breaker.failure-ratio=0.5

# Wait 2 minutes before the Open circuit goes to the Half Open state.
quarkus.fault-tolerance."org.kie.kogito.openapi.externalservice.api.ExternalServiceResourceApi/circuitBreakerEcho".circuit-breaker.delay=2
quarkus.fault-tolerance."org.kie.kogito.openapi.externalservice.api.ExternalServiceResourceApi/circuitBreakerEcho".circuit-breaker.delay-unit=minutes